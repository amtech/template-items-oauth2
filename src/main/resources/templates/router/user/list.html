<style type="text/css">
    .dl {
        display: inline-block;
    }

    .dl > .checkbox > input[type=checkbox] {
        margin-left: 10px;
    }
</style>

<div id="user_dialog" class="hidden">
    <!--添加弹出的窗口-->
    <div id="add_user_dialog">
        <form class="form-horizontal" @submit.prevent="handleSubmit_add" method="post">
            <fieldset>
                <!--名称-->
                <div class="form-group" v-bind:class="{ 'has-error': error.usernameError }">
                    <label class="col-md-2 control-label">用户名</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               v-model="user1.username">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.usernameError }">
                            {{error.usernameErrorMsg}}
                        </div>
                    </div>
                </div>
                <!-- 姓名-->
                <div class="form-group" v-bind:class="{ 'has-error': error.cnameError }">
                    <label class="col-md-2 control-label">姓名</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               v-model="user1.cname">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.cnameError }">
                            {{error.cnameErrorMsg}}
                        </div>
                    </div>
                </div>
                <!-- 密码-->
                <div class="form-group" v-bind:class="{ 'has-error': error.passwordError }">
                    <label class="col-md-2 control-label">密码</label>
                    <div class="col-md-10">
                        <input class="form-control" type="password"
                               v-model="user1.password">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.passwordError }">
                            {{error.passwordErrorMsg}}
                        </div>
                    </div>
                </div>
                <!-- email-->
                <div class="form-group" v-bind:class="{ 'has-error': error.emailError }">
                    <label class="col-md-2 control-label">email</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               v-model="user1.email">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.emailError  }">
                            {{error.emailErrorMsg}}
                        </div>
                    </div>
                </div>
                <!-- 电话-->
                <div class="form-group" v-bind:class="{ 'has-error': error.mobileError }">
                    <label class="col-md-2 control-label">电话</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               v-model="user1.mobile">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.mobileError }">
                            {{error.mobileErrorMsg}}
                        </div>
                    </div>
                </div>
                <!--排序-->
                <div class="form-group" v-bind:class="{ 'has-error': error.orderError }">
                    <label class="col-md-2 control-label">排序</label>
                    <div class="col-md-10">
                        <input class="form-control" placeholder="排序" type="text"
                               v-model="user1.orderIndex">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.orderError }">
                            {{error.orderErrorMsg}}
                        </div>
                    </div>
                </div>
                <!-- 部门ID-->
                <div class="form-group" >
                    <label class="col-md-2 control-label">部门ID</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text" readonly
                               v-model="user1.deptId" id="deptId">
                    </div>
                </div>
                <!--所属部门-->
                <div class="form-group">
                    <label class="col-md-2 control-label">所属部门</label>
                    <div class="col-md-10">
                        <input id="pNameByTree" class="form-control" placeholder="所属部门" type="text"
                               v-model="user1.departmentName"
                               readonly>
                        <a id="addGetPId" href="javascript:void(0);" style="margin-top: 15px;display: block;">获取部门</a>
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.deptError }">
                            {{error.deptErrorMsg}}
                        </div>
                    </div>
                </div>
                <!--获取角色-->
                <div class="form-group">
                    <label class="col-md-2 control-label">角色</label>
                    <div class="col-md-10">
                        <input id="pRoleByTree" class="form-control" placeholder="角色" type="text"
                               v-model="user1.roleName"
                               readonly>
                        <a id="addGetRole" href="javascript:void(0);" style="margin-top: 15px;display: block;">获取角色</a>
                        <div class="note-error margin-bottom-0">
                        </div>
                    </div>
                </div>
                <!--是否可用-->
                <div class="form-group">
                    <label class="col-md-2 control-label">是否可用</label>
                    <div class="col-md-10">
                        <label class="radio radio-inline">
                            <input type="radio" v-model="user1.enabled"
                                   class="radiobox style-0"
                                   v-bind:value="true" checked>
                            <span>是</span>
                        </label>
                        <label class="radio radio-inline">
                            <input type="radio" v-model="user1.enabled"
                                   class="radiobox style-0"
                                   v-bind:value="false" checked>
                            <span>否</span>
                        </label>
                    </div>
                </div>
            </fieldset>
            <button id="add" type="submit" class="hidden"></button>
        </form>
    </div>

    <!--编辑弹出的窗口-->
    <div id="edit_user_dialog">
        <form class="form-horizontal" @submit.prevent="handleSubmit_edit" method="post">
            <fieldset>
                <!--名称-->
                <div class="form-group" v-bind:class="{ 'has-error': error.usernameError }">
                    <label class="col-md-2 control-label">用户名</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               v-model="user1.username" readonly>
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.usernameError }">
                            {{error.usernameErrorMsg}}
                        </div>
                    </div>
                </div>
                <!-- 姓名-->
                <div class="form-group" v-bind:class="{ 'has-error': error.cnameError }">
                    <label class="col-md-2 control-label">姓名</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               v-model="user1.cname">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.cnameError }">
                            {{error.cnameErrorMsg}}
                        </div>
                    </div>
                </div>
                <!-- 密码-->
                <div class="form-group" v-bind:class="{ 'has-error': error.passwordError }">
                    <label class="col-md-2 control-label">密码</label>
                    <div class="col-md-10">
                        <input class="form-control" type="password"
                               v-model="user1.password">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.passwordError }">
                            {{error.passwordErrorMsg}}
                        </div>
                    </div>
                </div>
                <!-- email-->
                <div class="form-group" v-bind:class="{ 'has-error': error.emailError }">
                    <label class="col-md-2 control-label">email</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               v-model="user1.email">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.emailError  }">
                            {{error.emailErrorMsg}}
                        </div>
                    </div>
                </div>
                <!-- 电话-->
                <div class="form-group" v-bind:class="{ 'has-error': error.mobileError }">
                    <label class="col-md-2 control-label">电话</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               v-model="user1.mobile">
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.mobileError }">
                            {{error.mobileErrorMsg}}
                        </div>
                    </div>
                </div>
                <!--排序-->
                <div class="form-group" >
                    <label class="col-md-2 control-label">排序</label>
                    <div class="col-md-10">
                        <input class="form-control" placeholder="排序" type="text"
                               v-model="user1.orderIndex">
                        <div class="note-error margin-bottom-0">

                        </div>
                    </div>
                </div>
                <!-- 部门ID-->
                <div class="form-group" >
                    <label class="col-md-2 control-label">部门ID</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text" readonly
                               v-model="user1.deptId" id="deptId1">
                    </div>
                </div>
                <!--所属部门-->
                <div class="form-group">
                    <label class="col-md-2 control-label">所属部门</label>
                    <div class="col-md-10">
                        <input id="pNameByTree1" class="form-control" placeholder="所属部门" type="text"
                               v-model="user1.departmentName"
                               readonly>
                        <a id="editGetPId" href="javascript:void(0);" style="margin-top: 15px;display: block;">获取部门</a>
                        <div class="note-error margin-bottom-0"
                             v-bind:class="{ 'has-error text-danger margin-top-10': error.deptError }">
                            {{error.deptErrorMsg}}
                        </div>
                    </div>
                </div>
                <!--获取角色-->
                <div class="form-group">
                    <label class="col-md-2 control-label">角色</label>
                    <div class="col-md-10">
                        <input id="pRoleByTree1" class="form-control" placeholder="角色" type="text"
                                   v-model="user1.roleName"
                               readonly>
                        <a id="editGetRole" href="javascript:void(0);" style="margin-top: 15px;display: block;">获取角色</a>
                        <div class="note-error margin-bottom-0">

                        </div>
                    </div>
                </div>
                <!--是否可用-->
                <div class="form-group">
                    <label class="col-md-2 control-label">是否可用</label>
                    <div class="col-md-10">
                        <label class="radio radio-inline">
                            <input type="radio" v-model="user1.enabled"
                                   class="radiobox style-0"
                                   v-bind:value="true" checked>
                            <span>是</span>
                        </label>
                        <label class="radio radio-inline">
                            <input type="radio" v-model="user1.enabled"
                                   class="radiobox style-0"
                                   v-bind:value="false" checked>
                            <span>否</span>
                        </label>
                    </div>
                </div>
            </fieldset>
            <button id="edit" type="submit" class="hidden"></button>
        </form>
    </div>
</div>
<!-- row -->
<div class="row">
    <div id="toolbar" class="form-inline">
        <a href="javascript:;" id="add_dialog_link" class="btn btn-info btn-sm"> <i class="fa fa-plus-square-o"></i> 添加
        </a>
        <a href="javascript:;" id="edit_dialog_link" class="btn btn-warning btn-sm"><i class="fa fa-pencil-square "></i>
            编辑</a>
        <button id="delete-user" class="btn btn-danger btn-sm"
                rel="tooltip" data-placement="bottom"
                data-reset-msg="您确定要删除所选项吗？"><i class="fa fa-minus-square-o"></i> 删除
        </button>
        <select class="form-control" data-width="100" id="enabledSelector" onchange="searchResource()">
            <option value="">所有</option>
            <option value="1">可用</option>
            <option value="0">不可用</option>
        </select>
    </div>
    <!-- NEW WIDGET START -->
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <table id="table">
            <thead>
            <tr>
                <th data-checkbox="true"></th>

                <th data-field="id" data-sortable="true"
                    data-visible="false"
                    data-searchable="true" data-width="100"
                    data-title="ID" data-align="center"></th>

                <th data-field="username" data-sortable="true"
                    data-searchable="true" data-width="100"
                    data-title="用户名"
                    data-filter-control="input"
                    data-filter-control-placeholder="输入用户名"
                    data-align="center"></th>

                <th data-field="departmentName" data-sortable="true"
                    data-searchable="true" data-width="00"
                    data-title="所属部门" data-align="center"></th>
                <th data-field="deptId" data-sortable="false"
                    data-searchable="true" data-width="00"
                    data-title="部门ID" data-align="center"></th>

                <th data-field="roleName"
                    data-title="角色"
                    data-align="center"></th>

                <th data-field="cname"
                    data-sort-name="update_date"
                    data-sortable="true"
                    data-title="姓名"
                    data-filter-control="input"
                    data-filter-control-placeholder="输入姓名"
                    data-align="center"></th>

                <th data-field="password"
                    data-title="密码"
                    data-visible="false"
                    data-align="center"></th>

                <th data-field="mobile"
                    data-title="电话"
                    data-align="center"></th>

                <th data-field="email"
                    data-title="email"
                    data-align="center"></th>

                <th data-field="updateDate"
                    data-formatter="date_formatter"
                    data-title="最后登陆时间"
                    data-align="center"></th>

                <th data-field="createDate"
                    data-formatter="date_formatter"
                    data-title="创建时间"
                    data-align="center"></th>

                <th data-field="orderIndex"
                    data-sortable="true"
                    data-title="排序"
                    data-align="center"></th>

                <th data-field="enabled"
                    data-sortable="true"
                    data-formatter="enabledFormatter"
                    data-title="状态"
                    data-align="center"></th>
            </tr>
            </thead>
        </table>
    </article>
    <!-- WIDGET END -->

</div>

<script type="text/javascript">

    pageSetUp();
    var app

    // page_function
    var page_function = function () {
        var $table = $("#table");
        var query_params = function (params) {
            var temp = {
                limit: params.limit,
                offset: params.offset,
                order: params.order,
                sort: params.sort,
                username: $("input.bootstrap-table-filter-control-username").val(),
                cname:$("input.bootstrap-table-filter-control-cname").val(),
            }
            return temp;
        };

         app = new Vue({
            el: "#user_dialog",
            data: {
                user1: {
                    id:'',
                    username: '',
                    cname:'',
                    password:'',
                    email:'',
                    mobile:'',
                    deptId:'',
                    enabled:false,
                    roleName:'',
                    departmentName:'',
                    orderIndex:'',
                    defaultRoleId:'',
                },
                error: {
                    usernameError: false,
                    usernameErrorMsg: '',
                    cnameError: false,
                    cnameErrorMsg: '',
                    passwordError: false,
                    passwordErrorMsg: '',
                    emailError: false,
                    emailErrorMsg: '',
                    phoneError:false,
                    phoneErrorMsg:'',
                }
            },
            computed: {
                errors: function () {
                    return this.$vuerify.$errors // 错误信息会在 $vuerify.$errors 内体现
                }
            },
            methods: {
                handleSubmit_add: function () {
                    this.$vuerify.clear()//清空之前的验证结果信息
                    var check_result = this.$vuerify.check()// 手动触发校验所有数据
                    var $errs = this.$vuerify.$errors

                    app.error.usernameError = Boolean($errs.username)
                    app.error.usernameErrorMsg = $errs.username
                    app.error.cnameError = Boolean($errs.cname)
                    app.error.cnameErrorMsg = $errs.cname
                    app.error.passwordError = Boolean($errs.password)
                    app.error.passwordErrorMsg = $errs.password
                    app.error. emailError = Boolean($errs.email)
                    app.error.emailErrorMsg = $errs.email
                    app.error.mobileError = Boolean($errs.mobile)
                    app.error.mobileErrorMsg = $errs.mobile
                    app.error.orderError = Boolean($errs.orderIndex)
                    app.error.orderErrorMsg = $errs.orderIndex

                    if (!check_result) {
                        TF.show_error_message("错误消息提示", "请修正表单错误信息之后再提交", 3000)
                    } else {
                        var params = new URLSearchParams();
                        var datas = app.user1
                        for (var data in datas) {
                            if(data =="departmentName"||data=="deptId"||data =="roleName")
                                continue;
                            params.append(data, datas[data])
                        }
                        params.append('departmentName',$('#pNameByTree').val())
                        params.append('roleName',$('#pRoleByTree').val())
                        params.append('deptId',$('#deptId').val())
                        axios.post('/user/api/add', params)
                            .then(function (response) {
                                if (response.data.code == TF.STATUS_CODE.SUCCESS) {
                                    layer.msg(response.data.message);
                                    setTimeout(function () {
                                        $('#add_user_dialog').dialog('close');
                                        $table.bootstrapTable('refresh');

                                    })
                                } else {
                                    TF.show_error_msg(response.data.message)
                                }
                            })
                            .catch(function (error) {
                                TF.show_error_msg(error.response.data.message)
                            });
                    }
                    return false;
                },
                handleSubmit_edit: function () {
                    this.$vuerify.clear()//清空之前的验证结果信息
                    var check_result = this.$vuerify.check()// 手动触发校验所有数据
                    var $errs = this.$vuerify.$errors
                    app.error.usernameError = Boolean($errs.username)
                    app.error.usernameErrorMsg = $errs.username
                    app.error.cnameError = Boolean($errs.cname)
                    app.error.cnameErrorMsg = $errs.cname
                    app.error.passwordError = Boolean($errs.password)
                    app.error.passwordErrorMsg = $errs.password
                    app.error. emailError = Boolean($errs.email)
                    app.error.emailErrorMsg = $errs.email
                    app.error.mobileError = Boolean($errs.mobile)
                    app.error.mobileErrorMsg = $errs.mobile

                    if (!check_result) {
                        TF.show_error_message("错误消息提示", "请修正表单错误信息之后再提交", 3000)
                    } else {
                        var params = new URLSearchParams();
                        var datas = app.user1
                        for (var data in datas) {
                            params.append(data, datas[data])
                         /*   if(datas.deptId == null){
                                datas.deptId = app.user1.deptId
                            }*/
                        }
                        axios.post('/user/api/doEdit', params)
                            .then(function (response) {
                                if (response.data.code == TF.STATUS_CODE.SUCCESS) {
                                    layer.msg(response.data.message);
                                    setTimeout(function () {
                                        $('#edit_user_dialog ').dialog('close');
                                        $table.bootstrapTable('refresh');
                                    })
                                } else {
                                    TF.show_error_msg(response.data.message)
                                }
                            })
                            .catch(function (error) {
                                TF.show_error_msg(error.response.data.message)
                            });
                    }
                    return false;
                },
            },
            vuerify: {
                username: {
                    test: function () {
                        return String(app.user1.username).length >= 2
                    },
                    message: '用户名长度不能为空且不能过短'
                },
                cname:{
                    test: function () {
                    return String(app.user1.cname).length >= 2
                },
                message: '名字长度不能为空且不能过短'
            },
                password:{
                    test: function () {
                        return String(app.user1.password).length >= 2
                    },
                    message: '密码长度不能为空且不能过短'
                },
                email:{
                    test: function () {
                        var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;
                        return reg.test(app.user1.email);
                    },
                    message: '输入邮箱格式'
                },
                mobile:{
                    test: function () {
                        var reg =/^[1][358][0-9]{9}/;
                        return reg.test(app.user1.mobile);

                    },
                    message: '电话位(13,15,18)开头的11位数字'
                },
            }
        })

        $table.bootstrapTable({
            sidePagination: "server",
            url: "/user/api/list",
            toolbar: '#toolbar',
            showRefresh: true,
            method: 'post',
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",//post方式一定得改成这种contentType
            queryParams: query_params,
            height: getHeight(),
            sortName: 'id',//第一次进默认的排序字段
            sortOrder: 'asc',
            idField: "id",
            uniqueId: 'id',
            checkboxHeader: true,
            clickToSelect: true,
            showColumns: true,
            silentSort: false,
            maintainSelected: true,
            striped: true,
            cache: false,
            pagination: true,
            paginationLoop: false,
            pageList: '[10,25,50,150]',
            escape: true,
            filterControl: true,
            filterShowClear: true,
            searchTimeOut: 1000
        });


        // 点击添加角色弹出框
        $('#add_dialog_link').click(function () {
            app.user1.username = "";
            app.user1.cname ="";
            app.user1.password="";
            app.user1.email="";
            app.user1.mobile="";
            app.user1.orderIndex="";
            app.user1.deptId = "";
            app.user1.departmentName = "";
            app.user1.roleName = "";
            app.user1.enabled = false;

            $('#add_user_dialog').dialog('open');
            return false;
        });

        <!--添加dialog-->
        $('#add_user_dialog').dialog({
            autoOpen: false,
            width: 500,
            resizable: true,
            modal: true,
            title: "<div class='widget-header'><h4><i class='icon-ok'></i> 添加系统参数</h4></div>",
            buttons: [{
                html: "<i class='fa fa-plus-square-o'></i>&nbsp; 添加",
                "class": "btn btn-info",
                click: function () {
                    $("#add").trigger("click");
                }
            }, {
                html: "<i class='fa fa-times'></i>&nbsp; 取消",
                "class": "btn btn-default",
                click: function () {
                    $(this).dialog("close");
                }
            }]
        });

        //监听编辑按钮事件
        $("#edit_dialog_link").click(function () {

            var ss = $table.bootstrapTable('getSelections');
            if(ss.length == 1) {
                var res=ss[0];
                app.error.usernameError=false
                app.error.usernameErrorMsg = null
                app.error.cnameError = false
                app.error.cnameErrorMsg =null
                app.error.passwordError = false
                app.error.passwordErrorMsg = null
                app.error. emailError = false
                app.error.emailErrorMsg = null
                app.error.mobileError = false
                app.error.mobileErrorMsg = null
                $('#edit_user_dialog').dialog('open');

                app.user1.id = res.id;
                app.user1.username = res.username;
                app.user1.cname =res.cname;
                app.user1.password=res.password;
                app.user1.email=res.email;
                app.user1.mobile=res.mobile;
                app.user1.orderIndex=res.orderIndex;
                app.user1.deptId = res.deptId;
                app.user1.departmentName = res.departmentName;
                app.user1.roleName = res.roleName;
                app.user1.enabled = res.enabled;
　　　  　
            }else (
                TF.show_error_message("错误选择","只能对一条数据进行编辑")

            )
            return false;
        })

        $('#edit_user_dialog').dialog({
            autoOpen: false,
            width: 600,
            resizable: true,
            modal: true,
            title:  "<div class='widget-header'><h4><i class='icon-ok'></i> 编辑菜单</h4></div>",
            buttons: [{
                html: "<i class='fa fa-plus-square-o'></i>&nbsp; 确定",
                "class": "btn btn-info",
                click: function () {
                    $("#edit").trigger("click");
                }
            }, {
                html: "<i class='fa fa-times'></i>&nbsp; 取消",
                "class": "btn btn-default",
                click: function () {
                    $(this).dialog("close");
                }
            }]
        });

        <!-- 点击删除-->
        $('#delete-user').click(function () {
            var ss = $table.bootstrapTable('getSelections');
            if(ss.length == 0){
                TF.show_error_message("错误选择", "请至少选择一行数据进行删除")
            }else{
                $.SmartMessageBox({
                    title:"<i class='fa fa-minus-square-o' style='color:red'></i> 删除角色数据?",
                    content:$this.data('reset.msg')||"确认要删除角色数据?",
                    buttons:'[取消][确定]'
                },function (ButtonPressed) {
                    if(ButtonPressed == "确定"){
                        var ids ="";
                        for(var i = 0;i<ss.length;i++){
                            ids += ss[i].id+",";
                        }
                        ids=ids.substr(0,ids.length-1);//去除最后一个逗号
                        axios.post("/user/api/delete?id="+ids)
                            .then(function (response) {
                                if (response.data.code == TF.STATUS_CODE.SUCCESS) {
                                    layer.msg(response.data.message);
                                    setTimeout(function () {
                                        $table.bootstrapTable("refresh");
                                    }, 1000)
                                } else {
                                    TF.show_error_msg(response.data.message)
                                }
                            })
                    }
                })
            }
        });

        //监听搜索

        <!-- 添加页面弹出选择部门ztree-->
        $('#addGetPId').click(function () {
            layer.open({
                type: 2,
                area: ['300px', '400px'],
                title: ['选择部门(双击选定)', 'text-align:center;'],
                fixed: true,
                resize: false,
                offset: '200px',
                content: 'user/treeDept'
            })
        })

        <!--添加页面弹出选择角色ztree-->
        $("#addGetRole").click(function () {
            layer.open({
                type: 2,
                area: ['300px', '400px'],
                title: ['选择角色(双击选定)', 'text-align:center;'],
                fixed: true,
                resize: false,
                offset: '200px',
                content: 'user/treeRole'
            })
        })

        <!-- 编辑页面弹出选择部门ztree-->
        $('#editGetPId').click(function () {
            layer.open({
                type: 2,
                area: ['300px', '400px'],
                title: ['选择所属部门(双击选定)', 'text-align:center;'],
                fixed: true,
                resize: false,
                offset: '200px',
                content: 'user/treeDept'
            })
        })

        <!--编辑页面弹出选择角色ztree-->
        $("#editGetRole").click(function () {
            layer.open({
                type: 2,
                area: ['300px', '400px'],
                title: ['选择上级部门(双击选定)', 'text-align:center;'],
                fixed: true,
                resize: false,
                offset: '200px',
                content: 'user/treeRole'
            })
        })
    };

    //搜索
    function searchResource() {
        var opt = {
            url: "/user/api/list",
            silent: true,
            query: {
                username: $("input.bootstrap-table-filter-control-username").val(),
                cname:$("input.bootstrap-table-filter-control-cname").val(),
                enabled:$("#enabledSelector option:selected").val()
            }
        }
        $("#table").bootstrapTable('refresh', opt);
    }

    //获取高度
    function getHeight() {
        return $(window).height() - $('header').outerHeight(true)
            - $('div.page-footer').outerHeight(true)
            - $('#ribbon').outerHeight(true)
            - 25
    }
    //格式化 enable
    function enabledFormatter(enabled) {
        return enabled ? "<label class='label label-success'>可用</label>" : "<label class='label label-danger'>不可用</label>";
    }
    //格式化 日期
    function date_formatter(date) {
        return date.year + "-" + date.monthValue + "-" + date.dayOfMonth + " " + date.hour + ":" + date.minute + ":" + date.second;
    }


    loadScript("/static/js/libs/vue/axios.min.js", function () {
        loadScript("/static/js/libs/vue/vuerify.min.js", function () {
            loadScript("/static/js/libs/vue/url-search-params.min.js", page_function())
        })
    })


</script>
